<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/all.min.css">
    <link rel="stylesheet" href="./css/framework.css">
    <link rel="stylesheet" href="./css/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
    <title>Settings</title>
</head>
<body class="bg-eee">
    <div class="page d-flex bg-eee">
        <!-- Sidebar -->
        <div class="sidebar bg-white p-20 p-relative">
            <h3 class="p-relative text-center pb-15 mb-30 hide-mobile"><a href="/">Fitness Machine</a></h3>
            <ul>
            <li>
                <a href="index.html" class=" fs-14 rad-6 d-flex align-center c-black p-10">
                <i class="fa-regular fa-chart-bar fa-fw mr-10"></i>
                <span class="hide-mobile">Dashboard</span>
                </a>
            </li>
            <li>
                <a href="settings.html" class="active fs-14 rad-6 d-flex align-center c-black p-10">
                <i class="fa-solid fa-gear fa-fw mr-10"></i>
                <span class="hide-mobile">Settings</span>
                </a>
            </li>
            <li>
                <a href="profile.html" class="fs-14 rad-6 d-flex align-center c-black p-10">
                <i class="fa-regular fa-user fa-fw mr-10"></i>
                <span class="hide-mobile">Profile</span>
                </a>
            </li>
            <li>
                <a href="plans.html" class="fs-14 rad-6 d-flex align-center c-black p-10">
                <i class="fa-regular fa-credit-card fa-fw mr-10"></i>
                <span class="hide-mobile">Plans</span>
                </a>
            </li>
            <li>
                <a href="notification.html" class="fs-14 rad-6 d-flex align-center c-black p-10">
                <i class="fa-regular fa-bell fa-fw mr-10"></i>
                <span class="hide-mobile">Notification</span>
                </a>
            </li>
            </ul>
        </div>
        <!-- End Sidebar -->
        <!-- Content -->
        <div class="content w-full">
            <!-- Content Head -->
            <div class="head p-20 p-10-mobile bg-white between-flex">
                <div class="p-relative">
                    Get yoursefl ready for this adventure!
                </div>
                <div class="icons d-flex align-center">
                    <a href="notification.html" class="mr-15 p-relative"><i class="fa-regular fa-bell fa-lg"></i></a>
                    <img src="./imgs/avatar.png">
                </div>
            </div>
            <!-- End Content Head -->
            <h1 class="p-relative">Settings</h1>
            <div class="wrapper d-grid gap-20 pb-20">
                <!-- General Info Widget -->
                <div class="general-info p-20 bg-white rad-10">
                    <h2 class="mb-5">General Info</h2>
                    <p class="fs-14 c-grey mb-20">General Information About Your Account</p>
                    <div class="mb-15">
                        <label for="first-name" class="fs-14 c-grey mb-5 d-block">First Name</label>
                        <input type="text" placeholder="First Name" class="w-full p-10 b-none border-ccc rad-6" id="first-name">
                    </div>
                    <div class="mb-15">
                        <label for="last-name" class="fs-14 c-grey mb-5 d-block">Last Name</label>
                        <input type="text" placeholder="Last Name" class="w-full p-10 b-none border-ccc rad-6" id="last-name">
                    </div>
                    <div>
                        <label for="email" class="fs-14 c-grey mb-5 d-block">Email</label>
                        <div class="d-flex gap-10 align-center">
                            <input type="email" placeholder="o@nn.sa" class="w-full p-10 b-none border-ccc rad-6 " id="CEmail" >
                            <a href="#" class="button btn-shape bg-blue c-white fw-500 CBEmail">Change</a>
                        </div>
                    </div>
                </div>
                <!-- End General Info Widget -->
                <!-- Security Info Widget -->
                <div class="sec-info p-20 bg-white rad-10">
                    <h2 class="mb-5">Security Info</h2>
                    <p class="fs-14 c-grey mb-20">Security Information About Your Account</p>
                    <div class="between-flex mb-15">
                        <div class="mr-10">
                            <span class="mb-5 fw-500 d-block">Password</span>
                            <p class="fs-13 c-grey">Last Change On 25/10/2021</p>
                        </div>
                        <div>
                            <a href="#" class="button btn-shape bg-blue c-white fw-500 PChange">Change</a>
                        </div>
                    </div>
                    <div class="between-flex mb-15">
                        <div class="mr-10">
                            <span class="mb-5 fw-500 d-block">Two-Factor Authentication</span>
                            <p class="fs-13 c-grey">Enable/Disable The Feature</p>
                        </div>
                        <div>
                            <label>
                                <input type="checkbox" class="toggle-checkbox">
                                <div class="toggle-switch"></div>
                            </label>
                        </div>
                    </div>
                    <div class="between-flex">
                        <div class="mr-10">
                            <span class="mb-5 fw-500 d-block">Devices</span>
                            <p class="fs-13 c-grey">Check The Login Devices List</p>
                        </div>
                        <div>
                            <a href="#" class="button btn-shape bg-blue c-white fw-500">Devices</a>
                        </div>
                    </div>
                </div>
                <!-- End Security Info Widget -->
            </div>
        </div>
        <!-- End Content -->
    </div>
</body>
<script>
 
    // take the first-name and last-name and append them and save it in local storage as username
    document.querySelector('.CBEmail').addEventListener('click', function(e){
        e.preventDefault();
        if(document.querySelector('#first-name').value === '' || document.querySelector('#last-name').value === ''){
            return;
        }
        let firstName = document.querySelector('#first-name').value;
        let lastName = document.querySelector('#last-name').value;
        let username = firstName + ' ' + lastName;
        var loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));
        loggedInUser.username = username;
                localStorage.setItem('loggedInUser', JSON.stringify(loggedInUser));
        alert('Username Changed Successfully');
        document.querySelector('#first-name').value = '';
        document.querySelector('#last-name').value = '';
    });
    document.querySelector('.CBEmail').addEventListener('click', function(e){
        e.preventDefault();
        if(document.querySelector('#CEmail').value === ''){
            return;
        }
        let email = document.querySelector('#CEmail').value;
        var loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));
        loggedInUser.email = email;
                localStorage.setItem('loggedInUser', JSON.stringify(loggedInUser));
        alert('Email Changed Successfully');
        document.querySelector('#CEmail').value = '';
    });
    document.querySelector('.PChange').addEventListener('click', function(e){
        e.preventDefault();
        let div = document.createElement('div');
        div.classList.add('p-20', 'bg-white', 'rad-10', 'p-absolute', 'top-50', 'left-50', 'transform-center');
        div.innerHTML = `
            <h2 class="mb-5">Change Password</h2>
            <p class="fs-14 c-grey mb-20">Enter Your New Password</p>
            <div class="mb-15">
                <label for="password" class="fs-14 c-grey mb-5 d-block">Password</label>
                <input type="password" placeholder="Password" class="w-full p-10 b-none border-ccc rad-6" id="password">
            </div>
            <div>
                <label for="confirm-password" class="fs-14 c-grey mb-5 d-block">Confirm Password</label>
                <input type="password" placeholder="Confirm Password" class="w-full p-10 b-none border-ccc rad-6" id="confirm-password">
            </div>
            <div class="d-flex gap-10 align-center mt-20">
                <a href="#" class="button btn-shape bg-blue c-white fw-500 CPChange">Change</a>
                <a href="#" class="button btn-shape bg-red c-white fw-500">Cancel</a>
            </div>
        `;
        document.body.appendChild(div);
        document.querySelector('.bg-red').addEventListener('click', function(e){
            e.preventDefault();
            div.remove();
        });
        document.querySelector('.CPChange').addEventListener('click', function(e){
            e.preventDefault();
            let password = document.querySelector('#password').value;
            let confirmPassword = document.querySelector('#confirm-password').value;
            if(password === confirmPassword){
                var loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));
                loggedInUser.password = password;
                localStorage.setItem('loggedInUser', JSON.stringify(loggedInUser));
                alert('Password Changed Successfully');
                document.querySelector('#password').value = '';
                document.querySelector('#confirm-password').value = '';
                div.remove();
            }else{
                alert('Password and Confirm Password Must Be Same');
            }
        });
    });
    
</script>
</html>